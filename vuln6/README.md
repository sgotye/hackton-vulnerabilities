# Уязвимость на этапе согласования цены на топливо: поставщик может сам выставить NegotiationApproved для цены.

Когда договор согласован, поставщик отправляет ценовое уведомление (createPriceChange). При этом он передает в параметрах текущее состояние переговоров по цене. Если он передаст WaitingCustomer, то после этого, если авиакомпания одобряет, состояние перейдет в NegotiationApproved. Но NegotiationApproved может быть установлено самим поставщиком, и окончательное состояние будет выглядеть так, как будто кастомер одобрил цену. На самом деле это одобрение было установлено без ведома кастомера.

Не нужно передавать состояние переговоров в параметрах. Нужно его в функции устанавливать автоматически на WaitingCustomer.